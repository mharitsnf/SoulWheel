[gd_resource type="Resource" load_steps=5 format=2]

[ext_resource path="res://Resources/Attack Skills/attack_skill.gd" type="Script" id=1]
[ext_resource path="res://Resources/Arrow/4-160-0.tres" type="Resource" id=2]

[sub_resource type="GDScript" id=2]
script/source = "extends Node


var attack_behavior = null
var defend_behavior = null


# Attack:
# Basic has one phase with one arrow only. It moves at constant speed.

# Defend:
# Basic has one arrow only. It moves at constant speed.


func _init():
	attack_behavior = funcref(self, \"func_attack_behavior\")
	defend_behavior = funcref(self, \"func_attack_behavior\")


# Processing for each phase.
func func_attack_behavior(delta, arrows):
	for arrow in arrows:
		var new_rot_angle = arrow.rot_angle
		
		new_rot_angle += delta * arrow.move_speed
		new_rot_angle = fmod(new_rot_angle, 360)
		
		arrow.rot_angle = new_rot_angle
	
	return arrows


func func_defend_behavior(delta, arrows):
	pass
"

[sub_resource type="GDScript" id=1]
script/source = "extends Node


func first_condition(arrows):
	for arrow in arrows:
		if !arrow.enemies_struck.empty(): return true
	
	return false


func second_condition(arrows):
	for arrow in arrows:
		if !arrow.struck_by.empty(): return false
	
	return true
"

[resource]
script = ExtResource( 1 )
name = "Basic"
attack_arrows = [ [ ExtResource( 2 ) ] ]
defend_arrows = [ [ ExtResource( 2 ) ] ]
damage = 5
hp_cost = 5
is_cost_percentage = false
hp_bonus = 1
is_bonus_percentage = false
conditions = SubResource( 1 )
behaviors = SubResource( 2 )
